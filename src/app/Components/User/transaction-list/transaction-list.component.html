<section>
  <h1 class="ms-5 mt-5">Transaction History</h1>
  <div class="card mt-3"  >
    <p-table [value]="transactionList" class="p-3" [tableStyle]="{'min-width': '60rem'}" styleClass="p-datatable-striped"
    [paginator]="true"
    [rows]="5"
    [rowsPerPageOptions]="[5, 10, 20]">
        <ng-template pTemplate="header">
            <tr class="mb-5">
                <th pSortableColumn="categoryName" style="width:20%">
                    Category <p-sortIcon field="product.categoryName" />
                </th>
                <th pSortableColumn="transactionName" style="width:20%">
                    Transaction Type <p-sortIcon field="product.transactionName" />
                </th>
                <th pSortableColumn="amount" style="width:20%">
                    Amount <p-sortIcon field="product.amount" />
                </th>
                <th pSortableColumn="transactionDate" style="width:20%">
                    Transaction Date <p-sortIcon field="product.transactionDate" />
                </th>
                <th pSortableColumn="description" style="width:20%">
                    Description <p-sortIcon field="product.description" />
                </th>
                <th pSortableColumn="" style="width:20%">

                </th>
                <th pSortableColumn="" style="width:20%">

                </th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
            <tr class="my-3">
                <td>{{ product.categoryName }}</td>
                <td>{{ product.transactionName }}</td>
                <td>{{ product.amount }}</td>
                <td>{{ product.transactionDate }}</td>
                <td>{{ product.description }}</td>
                <td><button class="btn btn-success " (click)="openEditDialog(product)">Edit</button></td>
                <!-- <td><button class="btn btn-success " data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="getUpdateFormData(product)">Edit</button></td> -->
                <td><button class=" btn btn-danger" (click)="deleteTransaction(product)">Delete</button></td>
            </tr>
        </ng-template>
    </p-table>
  </div>

  <div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Transaction</h1>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" [formGroup]="UpdateForm">

            <div class="mt-1" *ngIf="categoryTypeUpdate">
              <label for="category-select">Enter Category</label>
              <select id="category-select" class="form-select" aria-label="Default select example" formControlName="CategoryId">
                <option selected>None</option>
                <option [value]="i.categoryId" *ngFor="let i of incomeCategory">{{i.categoryName}}</option>
              </select>
            </div>

            <div class="mt-3" *ngIf="!categoryTypeUpdate">
              <label for="category-select">Enter Category</label>
              <select id="category-select" class="form-select" aria-label="Default select example" formControlName="CategoryId">
                <option selected>None</option>
                <option [value]="i.categoryId" *ngFor="let i of expenseCategory">{{i.categoryName}}</option>
              </select>
            </div>



            <div class="mt-3">
              <label for="amount-input">Amount</label>
              <div class="input-group mb-3 w-100">
                <span class="input-group-text">PKR</span>
                <input id="amount-input" type="text" placeholder="Enter Amount" class="form-control" aria-label="Dollar amount (with dot and two decimal places)" formControlName="Amount">
              </div>
            </div>

            <label for="description-textarea" class="mt-3">Description</label>
            <div class="d-flex justify-content-center ">
              <div class="form-floating w-100">
                <textarea id="description-textarea" class="form-control" placeholder="Enter Description" style="height: 100px;" formControlName="Description"></textarea>
              </div>
            </div>

          </div>
          <div class="">
            <button type="button" class="btn btn-warning" (click)="submitForm()">Save changes</button>
          </div>
        </div>
      </div>
    </div>
  </div>

</section>
